<!DOCTYPE html>
<html>
  <head>
    <script src="https://aframe.io/releases/1.7.1/aframe.min.js"></script>
  </head>
  <body>
    <a-scene>
      <a-assets>
        <img id="bgTex" src="Assets/Edited2626866515_639e64dc0a_k.jpg" alt="background">
        <img id="cloudTex" src="Assets/engin-akyurt--ikp7hwRJ_M-unsplash.jpg" alt="cloud texture">
      </a-assets>

      <!-- 3D model assets with cloud texture applied -->
      <a-obj-model src="Assets/Cottage_2.obj" position="0 5 -20" rotation="-15 180 -15" scale="1 1 1" shadow="cast: false; receive: false" color="#add8e6"></a-obj-model>

      <a-obj-model src="Assets/CloudLarge.obj" position="36 20 -5" rotation="0 90 0" scale="1 1 1" shadow="cast: false; receive: false" material="src: #cloudTex; side:double"></a-obj-model>
      <a-obj-model src="Assets/CloudLarge2.obj" position="-28 -12 22" rotation="0 90 0" scale="1 1 1" shadow="cast: false; receive: false" material="src: #cloudTex; side:double"></a-obj-model>
      <a-obj-model src="Assets/CloudLong.obj" position="15 -30 -40" rotation="0 90 0" scale="1 1 1" shadow="cast: false; receive: false" material="src: #cloudTex; side:double"></a-obj-model>
      <a-obj-model src="Assets/CloudLong2.obj" position="-10 50 12" rotation="0 90 0" scale="1 1 1" shadow="cast: false; receive: false" material="src: #cloudTex; side:double"></a-obj-model>
      <a-obj-model src="Assets/CloudLong3.obj" position="-50 -20 -8" rotation="0 90 0" scale="1 1 1" shadow="cast: false; receive: false" material="src: #cloudTex; side:double"></a-obj-model>
      <a-obj-model src="Assets/CloudMedium.obj" position="20 -5 50" rotation="0 90 0" scale="1 1 1" shadow="cast: false; receive: false" material="src: #cloudTex; side:double"></a-obj-model>
      <a-obj-model src="Assets/CloudMedium2.obj" position="12 30 -25" rotation="0 90 0" scale="1 1 1" shadow="cast: false; receive: false" material="src: #cloudTex; side:double"></a-obj-model>
      <a-obj-model src="Assets/CloudSmall.obj" position="50 -25 -30" rotation="0 90 0" scale="1 1 1" shadow="cast: false; receive: false" material="src: #cloudTex; side:double"></a-obj-model>
      <a-obj-model src="Assets/CloudSmall2.obj" position="5 -45 17" rotation="0 90 0" scale="1 1 1" shadow="cast: false; receive: false" material="src: #cloudTex; side:double"></a-obj-model>
      <a-obj-model src="Assets/CloudSmall3.obj" position="-18 10 -50" rotation="0 90 0" scale="1 1 1" shadow="cast: false; receive: false" material="src: #cloudTex; side:double"></a-obj-model>
      <a-obj-model src="Assets/CloudLarge.obj" position="-12 34 9" rotation="0 90 0" scale="1 1 1" shadow="cast: false; receive: false" material="src: #cloudTex; side:double"></a-obj-model>
      <a-obj-model src="Assets/CloudLarge2.obj" position="44 -7 -33" rotation="0 90 0" scale="1 1 1" shadow="cast: false; receive: false" material="src: #cloudTex; side:double"></a-obj-model>
      <a-obj-model src="Assets/CloudLong.obj" position="-25 11 48" rotation="0 90 0" scale="1 1 1" shadow="cast: false; receive: false" material="src: #cloudTex; side:double"></a-obj-model>
      <a-obj-model src="Assets/CloudLong2.obj" position="7 -42 -12" rotation="0 90 0" scale="1 1 1" shadow="cast: false; receive: false" material="src: #cloudTex; side:double"></a-obj-model>
      <a-obj-model src="Assets/CloudLong3.obj" position="33 22 5" rotation="0 90 0" scale="1 1 1" shadow="cast: false; receive: false" material="src: #cloudTex; side:double"></a-obj-model>
      <a-obj-model src="Assets/CloudMedium.obj" position="-40 -18 28" rotation="0 90 0" scale="1 1 1" shadow="cast: false; receive: false" material="src: #cloudTex; side:double"></a-obj-model>
      <a-obj-model src="Assets/CloudMedium2.obj" position="19 45 3" rotation="0 90 0" scale="1 1 1" shadow="cast: false; receive: false" material="src: #cloudTex; side:double"></a-obj-model>
      <a-obj-model src="Assets/CloudSmall.obj" position="-6 -50 -17" rotation="0 90 0" scale="1 1 1" shadow="cast: false; receive: false" material="src: #cloudTex; side:double"></a-obj-model>
      <a-obj-model src="Assets/CloudSmall2.obj" position="30 12 41" rotation="0 90 0" scale="1 1 1" shadow="cast: false; receive: false" material="src: #cloudTex; side:double"></a-obj-model>
      <a-obj-model src="Assets/CloudSmall3.obj" position="-50 6 24" rotation="0 90 0" scale="1 1 1" shadow="cast: false; receive: false" material="src: #cloudTex; side:double"></a-obj-model>

      <!-- Anchor point for all balloons -->
      <a-entity id="balloonAnchor" position="1 12.85 -16.75" mass-balloons="count:6000; radiusMin:0.5; radiusMax:8; spreadPhi:1.2"></a-entity>

      <!-- Set Sky / background -->
      <a-sky src="#bgTex"></a-sky>
    </a-scene>

    <script>
      AFRAME.registerComponent('mass-balloons', {
        schema: {
          count: { type: 'int', default: 6000 },
          radiusMin: { type: 'number', default: 0.5 },
          radiusMax: { type: 'number', default: 5.75 },
          spreadPhi: { type: 'number', default: 0.7 },
          colors: { default: ['#62D12E','#FC8EAC','#FFEE8D','#00008B','#ED2939','#F4B4C4','#2E9DD1'] }
        },
        init: function () {
          const sceneEl = this.el.sceneEl;
          const anchorWorld = new AFRAME.THREE.Vector3();
          this.el.object3D.getWorldPosition(anchorWorld);

          const colors = this.data.colors;
          const count = this.data.count;

          for (let i = 0; i < count; i++) {
            // wider cone spread for more distribution
            const theta = Math.random() * Math.PI * 2;
            const phi = Math.random() * this.data.spreadPhi; // wider spread
            const r = Math.pow(Math.random(), 1.2) * (this.data.radiusMax - this.data.radiusMin) + this.data.radiusMin;

            const dx = r * Math.cos(theta) * Math.sin(phi);
            const dy = r * Math.cos(phi) + 0.3;
            const dz = r * Math.sin(theta) * Math.sin(phi);

            const bx = anchorWorld.x + dx;
            const by = anchorWorld.y + dy;
            const bz = anchorWorld.z + dz;

            // create balloon (larger radius)
            const balloon = document.createElement('a-sphere');
            const color = colors[Math.floor(Math.random() * colors.length)];
            const radius = 0.15 + Math.random() * 0.12; // bigger balloons
            balloon.setAttribute('radius', radius);
            balloon.setAttribute('color', color);
            balloon.setAttribute('position', `${bx} ${by} ${bz}`);

            // gentle float animation
            const bobDur = 1400 + Math.floor(Math.random() * 2600);
            const bobAmount = 0.02 + Math.random() * 0.05;
            const toY = by + bobAmount;
            balloon.setAttribute('animation__float', `property: position; to: ${bx} ${toY} ${bz}; dur: ${bobDur}; dir: alternate; loop: true; easing: easeInOutSine`);

            // scale/rotation variation
            const s = 0.85 + Math.random() * 0.4;
            balloon.setAttribute('scale', `${s} ${s} ${s}`);
            balloon.setAttribute('animation__spin', `property: rotation; to: ${Math.random()*20} ${Math.random()*360} ${Math.random()*20}; dur: ${7000+Math.random()*9000}; loop: true; easing: linear`);

            sceneEl.appendChild(balloon);
          }
        }
      });
    </script>
  </body>
</html>

